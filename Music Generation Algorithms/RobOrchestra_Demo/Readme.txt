Generates chords via a transition matrix based on the current chord.
Generates melody notes using a probability vector.
Adds percussion on top of that using preset drum patterns
Plays notes, displays stuff to the screen, and repeats

PlayPhrases is an extension of this code that outputs the piece to a file and lets you input a phrase pattern to use (phrases of a certain length, repeat certain phrases, etc.)